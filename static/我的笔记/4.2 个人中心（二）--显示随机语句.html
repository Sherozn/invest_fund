<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.12 (457935)"/><meta name="author" content="1369822836@qq.com"/><meta name="created" content="2019-09-13 12:58:05 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-09-16 13:19:52 +0000"/><title>4.2 个人中心（二）--显示随机语句</title></head><body><div>上节课已经将用户的微信头像、微信昵称显示出来了，这节课，我们在微信昵称的下面实现随机语句的显示</div><div><br/></div><div>也就是挑选10条励志的句子，用户每次切换到个人中心页面，都会随机显示这10条句子中的一条</div><div><br/></div><div>1、添加变量</div><div><span style="font-size: 13px;">编辑</span><span style="font-size: 13px;">&lt;</span><span style="font-size: 13px;">script&gt;部分的data</span><span style="font-size: 13px;">对象，</span><span style="font-size: 13px;">添加</span><span style="font-size: 13px;">quote</span><span style="font-size: 13px;">变量，</span><span style="font-size: 13px;">用来保存当前应该显示的语句</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>//参考代码，无需粘贴</div><div>//userinfo:{},</div><div><br/></div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">//需要粘贴的部分</span></div><div>quote: ""</div></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">2、添加方法</span></div><div><span style="font-size: 13px;">在</span><span style="font-size: 13px;">methods对象中添加方法</span><span style="font-size: 13px;">rankArray，用来生成当前应该显示的语句</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>methods: {</div><div>    //生成随机语句</div><div>    rankArray () {</div><div>      //Math.random()会生成0-1之间的小数，比如0.48204242025855937</div><div>      var a = Math.random() + ""</div><div>      //a.charAt(5)取a这个字符串的第6位数，能保证rand1为0-9之间的随机数</div><div>      var rand1 = a.charAt(5)</div><div>      //创建一个数组对象</div><div>      var quotes = new Array</div><div>      //将10个励志语句放到数组中</div><div>      quotes[1] = '不奋发，则心日颓靡；不检束，则心日恣肆'</div><div>      quotes[2] = '自制是一种秩序，一种对于快乐与欲望的控制'</div><div>      quotes[3] = '哪怕一点小小的克制，也会使人变得强而有力'</div><div>      quotes[4] = '做一个自律的人，像优秀的人学习，然后做好自己'</div><div>      quotes[5] = '真正的自由是在所有时候都能控制自己'</div><div>      quotes[6] = '每天爱自己多一点！！！'</div><div>      quotes[7] = '如果连自己都不能控制，有什么资格去谈自己想要的'</div><div>      quotes[8] = '登峰造极的成就源于自律'</div><div>      quotes[9] = '自我控制是最强者的本能'</div><div>      quotes[0] = '立志言为本，修身行乃先'</div><div>      //根据随机数rand1，在数组中找出随机语句，并赋值到quote上面</div><div>      this.quote = quotes[rand1]</div><div>    }</div><div>},</div></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">3、显示随机语句</span></div><div><span style="font-size: 13px;">编辑</span><span style="font-size: 14px;">template部分，替换语句</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">//原先语句</span></div><div>&lt;p class="notice"&gt;这里将用来显示随机语句&lt;/p&gt;</div><div><br/></div><div><br/></div><div>//替换成</div><div>&lt;p class="notice"&gt;{{quote}}&lt;/p&gt;</div></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">4、切换页面切换语句</span></div><div><span style="font-size: 13px;">每次切换页面都要切换随机语句就不能用mounted了，这里要用到是onShow，小程序的生命周期</span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">&gt;</span><span style="font-size: 13px;">onShow与</span><span style="font-size: 13px;">mounted的区别</span></div><div><span style="font-size: 13px;">onShow是小程序的生命周期，每次显示页面都会触发，重新生成随机语句</span></div><div><span style="font-size: 13px;">mounted是vue是生命周期，加载页面后会被触发，如果将</span><span style="font-size: 13px;">rankArray函数放在</span><span style="font-size: 13px;">mounted中，只会在加载小程序页面时触发，加载完成后，如果不退出小程序，这个页面就不会被重新加载，会被放在页面栈里面，所以首页、个人中心页面互相切换时，就不会再触发</span><span style="font-size: 13px;">mounted，也就不会</span><span style="font-size: 13px;">重新生成随机语句了</span></div><div><span style="font-size: 13px;"><br/></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>//参考语句，无需粘贴</div><div>//mounted () {</div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">  //...</span></div><div>//},</div><div><br/></div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">//需要粘贴的部分,不要忘记在上一行添加逗号隔开</span></div><div>onShow () {</div><div>  //调用随机语句</div><div>  this.rankArray()</div><div>}</div></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;">5、查看效果</span></div><div><span style="font-size: 13px;">切换首页和个人中心页面，查看随机语句是否变化</span></div><div><span style="font-size: 13px;"><img src="4.2%20%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%EF%BC%88%E4%BA%8C%EF%BC%89--%E6%98%BE%E7%A4%BA%E9%9A%8F%E6%9C%BA%E8%AF%AD%E5%8F%A5.html.resources/4E40253C-DAF9-4EA1-A56B-2927E7E207B1.png" height="674" width="380"/><br/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;"><br/></span></div><div><span style="font-size: 13px;"><br/></span></div></body></html>