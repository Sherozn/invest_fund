<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.12 (457935)"/><meta name="author" content="1369822836@qq.com"/><meta name="created" content="2019-08-26 16:16:03 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-09-13 12:58:01 +0000"/><title>4.1  个人中心（一）--页面样式、用户信息展示</title></head><body><div>第四章，我们来完善个人中心，主要操作是src/pages/me文件夹中的me.vue文件，我们先来看一下个人中心页面的效果：</div><div><img src="4.1%20%20%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%EF%BC%88%E4%B8%80%EF%BC%89--%E9%A1%B5%E9%9D%A2%E6%A0%B7%E5%BC%8F%E3%80%81%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E5%B1%95%E7%A4%BA.html.resources/DE732D3B-D481-48BE-A4AE-DCCE3B534646.png" height="672" width="380"/><br/></div><div><br/></div><div>1、将个人中心页面放在首页</div><div>在讲解app.json文件时，提到过在pages数组中第一个页面路径是进入小程序的默认显示页面</div><div>这一章我们编辑个人中心页面，将个人中心页面路径放在pages数组中的第一个</div><div><br/></div><div>编辑src/app.json文件，将个人中心页面路径放在第一个</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>"pages": [</div><div>  "pages/me/main",</div><div>  "pages/index/main"</div><div>]</div></div><div><br/></div><div>2、完善样式代码</div><div>在me.vue文件&lt;style lang='scss'&gt;&lt;/style&gt;标签中粘贴下面代码</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>.top{</div><div>  height: 80px;</div><div>  width: 100%;</div><div>  background:#EA5149;</div><div>  padding-top: 30px;</div><div>  display: block;</div><div>  .userinfo{</div><div>    padding-bottom: 5px;</div><div>    float: left;</div><div>    img{</div><div>      width: 120rpx;</div><div>      height:120rpx;</div><div>      margin: 10rpx;</div><div>      border-radius: 50%;</div><div>      border: 1px #D0D0D0 solid;</div><div>    }</div><div>  }</div><div>  .name{</div><div>    padding-top: 30px;</div><div>    padding-left: 5px;</div><div>    color: #FFFFFF;</div><div>    font-size: 16px;</div><div>    float: left;</div><div>    .notice{</div><div>      color: #D8D8D8;</div><div>      font-size: 12px;</div><div>      .number{</div><div>        font-size: 15px;</div><div>        color: #FFFFFF;</div><div>        font-weight: bold;</div><div>      }</div><div>    }</div><div>    .a-line{</div><div>      background:#EA5149;</div><div>      border: none;</div><div>      display: inline;</div><div>      font-size: 16px;</div><div>      color: #FFFFFF;</div><div>      text-decoration:underline;</div><div>    }</div><div>  }</div><div>}</div><div>.container{</div><div>  margin-top: 10px;</div><div>  background:#FFFFFF;</div><div>  font-size:15px;</div><div>  .row{</div><div>    padding: 0px 18px;</div><div>    border-bottom: 1px #E8E8E8 solid;</div><div>    height: 55px;</div><div>    line-height: 55px;</div><div>    .img {</div><div>      float:left;</div><div>      width: 20px;</div><div>      height: 20px;</div><div>      padding-top:16px;</div><div>    }</div><div>    .name {</div><div>      float:left;</div><div>    }</div><div>  }</div><div>  .right {</div><div>    float: right;</div><div>    color: #C8C8C8;</div><div>    line-height:55px;</div><div>  }</div><div>  .left {</div><div>    width:80%;</div><div>  }</div><div>}  </div></div><div><br/></div><div><br/></div><div>3、获取用户信息</div><div>（1）编辑script部分</div><div>在data对象中添加userinfo变量，在mounted对象中通过wx.getStorageSync获取缓存信息，并保存到userinfo变量中</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>&lt;script&gt;</div><div>  export default {</div><div>    data () {</div><div>      return {</div><div>        // 用户信息</div><div>        userinfo: {}</div><div>      }</div><div>    },</div><div>    mounted () {</div><div>      const userinfo = wx.getStorageSync('userinfo')</div><div>      this.userinfo = userinfo</div><div>      //userinfo是一个JSON对象，将其转换成字符串打印出来，便于我们查看</div><div>      console.log("用户信息userinfo：",JSON.stringify(this.userinfo))</div><div>    }</div><div>  }</div><div>&lt;/script&gt;</div></div><div><br/></div><div>（2）查看userinfo信息的格式</div><div>在前端和后端运行`npm run dev`启动项目，打开微信开发者工具在控制台查看打印的用户信息</div><div>下面的信息中，有nickName微信昵称字段、avatarUrl头像图片字段，我们接下来会用到</div><div>userinfo.avatarUrl、userinfo.nickName就能读到这些信息</div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>用户信息userinfo： {"openId":"oQPCO4ol5Y_-yL0MnCGxwbiHbSek","nickName":"ww","gender":2,"language":"zh_CN","city":"Qingdao","province":"Shandong","country":"China","avatarUrl":"https://wx.qlogo.cn/mmopen/vi_32/Q0j4TwGTfTINSykpP0tWoQskqd45xh2IKxiaTTAN0rStI9Ude52arCwia3E0Z8qicCNSicK74ZQMYZfSKASw0Tf2ibA/132","watermark":{"timestamp":1567927324,"appid":"wx1537a4db01c83194"}}</div></div><div><br/></div><div><br/></div><div><span style="font-size: 14px;">3、完善个人中心页面</span></div><div><span style="font-size: 14px;">（1）</span><span style="font-size: 14px;">编辑template部分</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>&lt;template&gt;</div><div>    &lt;div&gt;</div><div>      &lt;div class="top"&gt;</div><div>        &lt;div class="userinfo" &gt;</div><div>          &lt;!-- 取userinfo变量中的avatarUrl字段，也就是微信头像的链接 --&gt;</div><div>          &lt;img :src="userinfo.avatarUrl" alt=""&gt;</div><div>        &lt;/div&gt;</div><div>        &lt;div class="name"&gt;</div><div>          &lt;!-- 取userinfo变量中的nickName字段，也就是微信昵称 --&gt;</div><div>          &lt;label&gt;{{userinfo.nickName}}&lt;/label&gt;</div><div>          &lt;p class="notice"&gt;这里将用来显示随机语句&lt;/p&gt;</div><div>        &lt;/div&gt; </div><div>      &lt;/div&gt;</div><div>      &lt;div class="container"&gt;</div><div>          &lt;div class="row"&gt;</div><div>            &lt;label class="left"&gt;</div><div>              &lt;img class="img" src="/static/images/homework.png"&gt;</div><div>            &lt;/label&gt;</div><div>            &lt;label class="name"&gt;&amp;nbsp;&amp;nbsp;操作指引&lt;/label&gt;</div><div>            &lt;label class="right"&gt;</div><div>              &gt;</div><div>            &lt;/label&gt;</div><div>          &lt;/div&gt;</div><div>          &lt;div class="row"&gt;</div><div>            &lt;label class="left"&gt;</div><div>              &lt;img class="img" src="/static/images/classroom.png"&gt;</div><div>            &lt;/label&gt;</div><div>            &lt;label class="name"&gt;&amp;nbsp;&amp;nbsp;小程序开发实战课程&lt;/label&gt;</div><div>            &lt;label class="right"&gt;</div><div>              &gt;</div><div>            &lt;/label&gt;</div><div>          &lt;/div&gt;</div><div>        &lt;/div&gt;</div><div>        &lt;div class="container"&gt;</div><div>          &lt;div class="row"&gt;</div><div>            &lt;label class="left"&gt;</div><div>              &lt;img class="img" src="/static/images/delete.png"&gt;</div><div>            &lt;/label&gt;</div><div>            &lt;label class="name"&gt;&amp;nbsp;&amp;nbsp;清空记录&lt;/label&gt;</div><div>            &lt;label class="right"&gt;</div><div>              &gt;</div><div>            &lt;/label&gt;</div><div>          &lt;/div&gt;</div><div>          &lt;div class="row"&gt;</div><div>            &lt;label class="left"&gt;</div><div>              &lt;img class="img" src="/static/images/approval.png"&gt;</div><div>            &lt;/label&gt;</div><div>            &lt;label class="name"&gt;&amp;nbsp;&amp;nbsp;意见反馈&lt;/label&gt;</div><div>            &lt;label class="right"&gt;</div><div>              &gt;</div><div>            &lt;/label&gt;</div><div>          &lt;/div&gt;</div><div>      &lt;/div&gt;</div><div>    &lt;/div&gt;</div><div>&lt;/template&gt;</div></div><div><br/></div><div>（2）代码解析</div><div>`:src="userinfo.avatarUrl"`</div><div>我们在读取微信头像时，会发现src前面有一个冒号</div><div>这个是vue的语法，冒号:其实是<span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(64, 64, 64); font-family: -apple-system, system-ui, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">v-bind的缩写，本来应该写成</span><span style="font-size: 16px; color: rgb(64, 64, 64);">`</span><span style="font-size: 16px; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; color: rgb(64, 64, 64); font-family: -apple-system, system-ui, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;">v-bind</span><span style="font-size: 16px; color: rgb(64, 64, 64);">:src="userinfo.avatarUrl"`</span></div><div>表示等号后面的语句是变量或者表达式</div><div><br/></div><div>（3）查看效果</div><div>在微信开发者工具中目前的效果如下，点击【操作指引】、【清空记录】等按钮都没有反应，这是因为我们没有添加点击事件，在后面的课程中会讲到</div><div><img src="4.1%20%20%E4%B8%AA%E4%BA%BA%E4%B8%AD%E5%BF%83%EF%BC%88%E4%B8%80%EF%BC%89--%E9%A1%B5%E9%9D%A2%E6%A0%B7%E5%BC%8F%E3%80%81%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E5%B1%95%E7%A4%BA.html.resources/A93AE69F-DD1A-4BE2-B023-E4112986730E.png" height="673" width="380"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>