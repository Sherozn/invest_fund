<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.12 (457935)"/><meta name="author" content="1369822836@qq.com"/><meta name="created" content="2019-09-17 13:16:13 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-09-17 13:20:29 +0000"/><title>4.6 意见反馈（二）--上传照片</title></head><body><div>1、添加变量</div><div>编辑opinion.vue页面script部分的代码，添加data对象，在里面定义两个变量opinion、word_count</div><div>opinion是用户反馈信息，word_count是用户反馈信息的字数</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>&lt;script&gt;</div><div>export default {</div><div>  data () {</div><div>    return {</div><div>      opinion:"",</div><div>      word_count:0</div><div>    }</div><div>  }</div><div>}</div><div>&lt;/script&gt;</div></div><div><br/></div><div>2、添加页面代码</div><div>（1）编辑opinion.vue页面template部分的代码，</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>&lt;template&gt;</div><div>  &lt;div&gt;</div><div>    &lt;div class="container"&gt;</div><div>      &lt;div class="row"&gt;</div><div>        &lt;label class="name"&gt;意见与反馈&lt;/label&gt;</div><div>      &lt;/div&gt;</div><div>      &lt;div class="row text"&gt;</div><div>        &lt;div&gt;</div><div>          &lt;textarea</div><div>            v-model='opinion'</div><div>            class = "input"</div><div>            maxlength='200'</div><div>            placeholder="点击这里填写你的建议、问题反馈、合作等信息，我会认真对待每一条信息~"</div><div>          &gt;&lt;/textarea&gt; </div><div>          &lt;!-- word_count用来保存实时输入字数的长度 --&gt;</div><div>          &lt;label class="word-count"&gt;{{word_count}}/200&lt;/label&gt;</div><div>        &lt;/div&gt;</div><div>      &lt;/div&gt;</div><div>    &lt;/div&gt;</div><div>    &lt;button&gt;提交&lt;/button&gt;</div><div>  &lt;/div&gt;</div><div>&lt;/template&gt;</div></div><div><br/></div><div>（2）textarea组件介绍</div><div>textarea是多行输入框，是小程序的原生组件</div><div>v-model：用来绑定在data对象中定义的opinion变量，会将用户输入的信息，保存到opinion中</div><div>maxlength：限定最长输入的长度</div><div>placeholder：当未输入时，显示的提示信息</div><div><br/></div><div>&gt;小程序文档参考textarea</div><div><a href="https://developers.weixin.qq.com/miniprogram/dev/component/textarea.html">https://developers.weixin.qq.com/miniprogram/dev/component/textarea.html</a></div><div><br/></div><div>3、实时监控字数</div><div>当用户在textarea多行输入框中进行输入，会实时显示当前输入的字数，这就要用到监控函数watch了</div><div>在watch监控函数中定义一个与需要监控的变量同名的方法，注意，必须是与需要监控的变量同名的方法</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>//参考代码，无需粘贴</div><div>//data () {</div><div>  //... </div><div>//},</div><div><br/></div><div><br/></div><div><span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;">//需要添加的代码</span></div><div>watch: {</div><div>  //与需要监控的变量opinion同名的方法</div><div>  opinion () {</div><div>    this.word_count = this.opinion.length</div><div>  }</div><div>}</div></div><div><br/></div><div>4、查看效果</div><div>在输入框中输入时时，右下角的数字也会随之变化</div><div><img src="4.6%20%E6%84%8F%E8%A7%81%E5%8F%8D%E9%A6%88%EF%BC%88%E4%BA%8C%EF%BC%89--%E4%B8%8A%E4%BC%A0%E7%85%A7%E7%89%87.html.resources/790F698E-2BD5-4EB0-AFFB-C7A12D857C34.png" height="676" width="384"/></div><div><br/></div><div>5、可能遇到的问题</div><div>因为我们限定了200的字数，在微信开发者工具上面测试的时候，可能会出现还没到200字就输入不了的情况</div><div>就像下面这样，想输入拼音dao，但是输入d就卡住了，不能再往下输入了。</div><div><br/></div><div>这个是因为电脑端会将输入过程中的拼音的长度也计算到输入总长度中，所以「到」字虽然只是一个字符，但是拼音有「dao」有三个字符，输入「d」到200字符的限定长度了，后面的拼音就输入不了了</div><div><br/></div><div>不过不需要担心，在手机端不会出现这种情况，手机端输入过程中拼音的长度不会计算到输入总长度中，算是微信开发者工具的一个无关痛痒的小bug吧</div><div><img src="4.6%20%E6%84%8F%E8%A7%81%E5%8F%8D%E9%A6%88%EF%BC%88%E4%BA%8C%EF%BC%89--%E4%B8%8A%E4%BC%A0%E7%85%A7%E7%89%87.html.resources/38564AF5-8390-40A5-9F70-05204D6E04D6.png" height="236" width="374"/></div><div><br/></div><div><br/></div></body></html>