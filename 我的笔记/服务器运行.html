<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.12 (457935)"/><meta name="author" content="1369822836@qq.com"/><meta name="created" content="2019-08-17 00:29:45 +0000"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-08-19 06:53:28 +0000"/><title>服务器运行</title></head><body><div>安装git</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>[root@VM_16_15_centos ~]# sudo apt-get install git</div><div>sudo: apt-get: command not found</div><div>[root@VM_16_15_centos ~]# git -version</div><div>-bash: git: command not found</div><div>[root@VM_16_15_centos ~]# yum update</div><div>Loaded plugins: fastestmirror, langpacks</div><div>[root@VM_16_15_centos ~]# sudo yum install -y git</div><div>安装成功</div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>[root@VM_16_15_centos release]# mkdir invest_fund</div><div>[root@VM_16_15_centos release]# cd invest_fund/</div><div>[root@VM_16_15_centos invest_fund]#</div></div><div><br/></div><div><br/></div><div><br/></div><div>初始化数据库</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div># 切换到服务端代码目录</div><div>[root@VM_16_15_centos invest_fund]# cd server/</div><div><div><br/></div></div><div># 安装依赖</div><div>[root@VM_16_15_centos server]# npm install</div><div><div><br/></div></div><div># 安装全局依赖</div><div>[root@VM_16_15_centos server]# sudo npm install -g nodemon</div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><div>[root@VM_16_15_centos server]# node tools/initdb.js</div></div><div><div><br/></div></div><div>======================================</div><div>开始初始化数据库...</div><div>准备读取 SQL 文件：/data/release/invest_fund/server/tools/cAuth.sql</div><div>开始执行 SQL 文件...</div><div>数据库初始化成功！</div></div><div><br/></div><div>进入数据库</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>[root@VM_16_15_centos server]# mysql -uroot -p</div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div>DROP TABLE IF EXISTS `records`;</div><div><div><br/></div></div><div>CREATE TABLE `records` (</div><div>  `id` int(11) NOT NULL AUTO_INCREMENT,</div><div>  `openid` varchar(100) NOT NULL,</div><div>  `add` int(11) NOT NULL,</div><div>  `mark` int(11) NOT NULL,</div><div>  `note` varchar(100) DEFAULT NULL,</div><div>  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,</div><div>  PRIMARY KEY (`id`)</div><div>) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</div><div><div><br/></div></div><div>DROP TABLE IF EXISTS `opinions`;</div><div><div><br/></div></div><div>CREATE TABLE `opinions` (</div><div>  `id` int(11) NOT NULL AUTO_INCREMENT,</div><div>  `openid` varchar(100) NOT NULL,</div><div>  `opinion` text NOT NULL,</div><div>  `src` text NOT NULL,</div><div>  `wechat` varchar(20) DEFAULT NULL,</div><div>  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,</div><div>  PRIMARY KEY (`id`)</div><div>) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</div></div><div><br/></div><div><br/></div><div><br/></div><div>在微信小程序后台将域名添加上</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></body></html>